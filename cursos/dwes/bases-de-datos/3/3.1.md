# 3.1. Conexión a la base de datos ([↑](README.md))

_Contenido creado por Manuel Ignacio López Quintero_

La **conexión a la base de datos** en PHP se puede realizar utilizando la extensión [MySQLi](https://www.php.net/manual/book.mysqli.php) (MySQL Improved). MySQLi es una extensión de PHP que proporciona una interfaz mejorada para interactuar con las bases de datos MySQL y MariaDB, ofreciendo métodos para conectarse, ejecutar consultas y manejar resultados. MySQLi puede ser utilizado tanto de manera procedimental como orientada a objetos. Esta sección se centrará en el uso de **MySQLi orientado a objetos**, que permite una sintaxis más limpia y modular mediante la creación de una instancia de la clase `mysqli`.

Antes de establecer la conexión, se deben definir las **credenciales** necesarias para conectarse a la base de datos. Estas credenciales típicamente incluyen el *host*, el nombre de usuario, la contraseña y el nombre de la base de datos. A continuación se muestra un ejemplo de cómo definir estas variables en PHP:

```php
$host = 'localhost'; // Host de la base de datos
$user = 'nombre_usuario'; // Nombre de usuario
$pass = 'contrasena'; // Contraseña
$db = 'base_datos'; // Nombre de la base de datos
```

Estas variables contienen la información necesaria para identificar y autenticar la conexión a la base de datos. El ***host*** suele ser `localhost` cuando la base de datos y el *script* PHP están en el mismo servidor. El **nombre de usuario** y la **contraseña** deben corresponder a un usuario con los permisos adecuados para acceder a la base de datos específica identificada por el **nombre de la base de datos**.

Una vez definidas las credenciales, se procede a crear una nueva instancia de la clase `mysqli` utilizando dichas credenciales. Este paso **inicializa** la conexión a la base de datos:

```php
$mysqli = new mysqli($host, $user, $pass, $db);
```

En este punto, `$mysqli` es un objeto que representa la conexión a la base de datos. Si la conexión se establece con éxito, este objeto puede ser utilizado para realizar consultas y otras operaciones en la base de datos.

Para manejar errores de conexión, se puede utilizar un bloque `try-catch`. Esto permite capturar excepciones y manejar errores de una manera controlada. A continuación se muestra un ejemplo de cómo hacerlo:

```php
try {
    $mysqli = new mysqli($host, $user, $pass, $db);
} catch (mysqli_sql_exception $e) {
    echo 'Error: ' . $e->getMessage();
}
```

En este código, se intenta establecer la conexión a la base de datos dentro del bloque `try`. Si ocurre algún error durante la conexión, se lanza una excepción de tipo `mysqli_sql_exception`, la cual es capturada por el bloque `catch`. Dentro del bloque `catch`, se puede manejar el error, por ejemplo, mostrando un mensaje descriptivo utilizando `echo` y el método `getMessage()` del objeto de excepción.

Este enfoque de manejo de errores asegura que cualquier problema en la conexión se detecte y maneje de manera apropiada, evitando que el *script* se detenga abruptamente y proporcionando información útil para la resolución de problemas.


_Contenido creado por Manuel Ignacio López Quintero_
