# 4.1. Conexión a la base de datos ([↑](README.md))

_Contenido creado por Manuel Ignacio López Quintero_

La conexión a una **base de datos** en PHP utilizando [PDO](https://www.php.net/manual/en/book.pdo.php) (PHP Data Objects) se realiza mediante un conjunto de pasos claramente definidos. PDO es una extensión que proporciona una interfaz para acceder a bases de datos en PHP. Para conectar una aplicación PHP a una base de datos, se debe seguir un proceso sistemático que asegura tanto la **funcionalidad** como la **seguridad** de la conexión.

El primer paso es definir los **parámetros de conexión**. Estos incluyen el tipo de base de datos, el nombre de la base de datos, el servidor donde se encuentra la base de datos, y las credenciales de acceso (nombre de usuario y contraseña). Cabe destacar que a estas credenciales hay que aplicarles **medidas de seguridad** que se verán más adelante. A continuación, se presenta un ejemplo de cómo definir estos parámetros:

```php
$host = 'localhost';
$db = 'nombre_base_datos';
$user = 'usuario';
$pass = 'contraseña';
```

Una vez definidos los parámetros, se construye el **Data Source Name (DSN)**, que es una cadena que contiene la información necesaria para conectar a la base de datos. Para una base de datos MySQL o MariaDB, el DSN tiene el siguiente formato:

```php
$dsn = 'mysql:host=' . $host . ';dbname=' . $db;
```

Con los parámetros definidos, se procede a crear una instancia de PDO utilizando el DSN y las credenciales configuradas. Este paso es importante ya que aquí es donde se establece la conexión con la base de datos. Se utiliza un bloque `try`-`catch` para manejar cualquier excepción que pueda ocurrir durante la conexión, lo que permite gestionar errores de forma controlada y segura. A continuación se presenta un ejemplo de cómo se realiza este paso:

```php
try {
    $pdo = new PDO($dsn, $user, $pass);
} catch (PDOException $e) {
    echo 'Error: ' . $e->getMessage();
}
```

Este código crea una nueva instancia de la clase `PDO`. Si ocurre algún error durante la creación de esta instancia, el bloque `catch` captura la excepción y la maneja adecuadamente, generalmente registrando el error y deteniendo la ejecución del *script* para evitar problemas mayores.

Una vez establecida la conexión, el objeto `$pdo` de la clase PDO puede ser utilizado para interactuar con la base de datos. Esto incluye la **ejecución de consultas**, la **obtención de resultados** y el manejo de **transacciones**. La conexión se mantiene abierta durante el tiempo que el objeto PDO esté en uso y se cierra automáticamente cuando el objeto es destruido o cuando el *script* finaliza su ejecución.

_Contenido creado por Manuel Ignacio López Quintero_
