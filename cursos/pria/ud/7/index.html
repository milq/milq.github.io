<html xmlns='http://www.w3.org/1999/xhtml' lang='es'>
  <head>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=2.0' />

    <meta name='author' content='Manuel Ignacio López Quintero' />
    <meta name='description' content='Curso de programación en red e inteligencia artificial.' />
    <meta name='keywords' content='curso, programación, red, inteligencia, artificial' />

    <title>Máquinas de estado finito - Manuel Ignacio López Quintero</title>
    <link rel='icon' href='../../../../src/png/icon.png' />
    <link rel='stylesheet' href='../../../../src/css/simple.css' />
  </head>

  <body>
    <h1>7. Máquinas de estado</h1>

    <nav><a href='https://milq.github.io/cursos/pria'>Programación en Red e IA</a> | Unidad creada por <a href='https://milq.github.io'>Manuel Ignacio López Quintero</a> bajo esta <a href='https://creativecommons.org/licenses/by-sa/4.0/'>licencia</a>.</nav>

    <h2>Contenidos</h2>

    <ol>
      <li><a href='src/decision_making.png'>Toma de decisiones</a>:
        <ul>
          <li>Problema de usar <em>if-else</em>:
            <ul>
              <li><a href='https://en.wikipedia.org/wiki/Spaghetti_code'><em>Spaghetti code</em></a> (<a href='src/spaghetti_code.png'>ejemplo</a>).</li>
            </ul>
          </li>
          <li>Solución:
            <ul>
              <li><a href='src/decision_making_techniques.png'>Técnicas</a>.</li>
            </ul>
          </li>
        </ul>
      <br /></li>

      <li><a href='https://en.wikipedia.org/wiki/Finite-state_machine'>Máquina de estado finito</a> (<em>finite-state machine</em>, FSM) (<a href='src/fsm_example.png'>ejemplo</a>):<br /><br />
        <ul>
          <li><a href='https://en.wikipedia.org/wiki/Finite-state_machine#Concepts_and_terminology'>Terminología</a>:
            <ul>
              <li>Estado.</li>
              <li>Transición.</li>
            </ul>
          <br /></li>

          <li><a href='https://en.wikipedia.org/wiki/Finite-state_machine#Representations'>Representaciones</a>:
            <ul>
              <li><a href='https://en.wikipedia.org/wiki/State_diagram'>Diagramas de estado</a> (<a href='https://upload.wikimedia.org/wikipedia/commons/c/cf/Finite_state_machine_example_with_comments.svg'>ejemplo</a>).</li>
            </ul>
          <br /></li>

          <li>Implementación (<a href='src/fsm_implementations.pdf'>artículo</a>):
            <ul>
              <li>Básica:
                <ul>
                  <li>Usando <em>enum</em> y <em>switch</em> (<a href='src/Enemy.cs'>ejemplo</a>) (<a href='https://www.reddit.com/r/gamedev/comments/g1dhk/i_hate_finite_state_machines/c1k8q4b/'>opinión</a>).</li>
                </ul>
              </li>
              <li>Intermedia:
                <ul>
                  <li>Usando diccionarios para definir las transiciones entre estados (<a href='https://github.com/MarcoMig/Finite-State-Machine-FSM'>ejemplo</a>).</li>
                </ul>
              </li>
              <li>Avanzada:
                <ul>
                  <li>Usando interfaces y una clase para cada estado (<a href='https://www.youtube.com/watch?v=-VkezxxjsSE'>ejemplo</a>).</li>
                  <!-- <a href='https://github.com/MinaPecheux/UnityTutorials-FiniteStateMachines'>código</a> -->
                </ul>
              </li>
              <li>Otro:
                <ul>
                  <li>Usando <em>tools</em> como <a href='https://docs.unity3d.com/Manual/AnimatorControllers.html'>Animator Controller</a> y <a href='https://docs.unity3d.com/Manual/StateMachineBehaviours.html'>StateMachineBehaviour</a> (<a href='https://docs.unity3d.com/ScriptReference/StateMachineBehaviour.html'>clase</a>) de Unity.</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      <br /></li>

      <li>Máquina de estado finito jerárquica (<em>hierarchical finite-state machine</em>, <a href='src/hfsm_example.png'>HFSM</a>) (<a href='https://www.youtube.com/watch?v=OtUKsjPWzO8'>vídeo</a>) (<a href='https://github.com/Inspiaaa/UnityHFSM'>UnityHFSM</a>).<br /><br /></li>

      <li style='list-style-type: upper-alpha' value='1'><a href='https://docs.unity3d.com/Manual/AnimationSection.html'>Animation</a> en Unity:
        <ul>
          <li><a href='https://docs.unity3d.com/Manual/AnimationClips.html'>Animation Clip</a>.</li>
          <li><a href='https://docs.unity3d.com/Manual/AnimatorControllers.html'>Animator Controller</a>:
            <ul>
              <li><a href='https://docs.unity3d.com/Manual/AnimationStateMachines.html'>Animation State Machines</a>.</li>
            </ul>
          </li>
        </ul>
<!--
        <ul>
          <li><a href='https://docs.unity3d.com/Manual/AnimationStateMachines.html'>Máquinas de estado para animación</a> en Unity:
            <ul>
              <li><a href='https://docs.unity3d.com/Manual/StateMachineBasics.html'>Conceptos básicos</a>:
                <ul>
                  <li><a href='https://docs.unity3d.com/Manual/class-State.html'>Estado</a>.</li>
                  <li><a href='https://docs.unity3d.com/Manual/class-Transition.html'>Transiciones</a>.</li>
                  <li>Eventos.</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
-->
      <br /></li>

      <li style='list-style-type: upper-alpha'>Otros:
        <ul>
          <li><a href='https://gamedevelopertips.com/finite-state-machine-game-developers/'><em>Finite State Machine for game developers</em></a></li>
          <li><a href='https://www.youtube.com/watch?v=Vt8aZDPzRjI'><em>State Machines explained</em></a>.</li>
          <li><a href='https://www.youtube.com/watch?v=-VkezxxjsSE'><em>Make a basic finite-state machine in Unity</em></a>.</li>
          <li><a href='https://www.youtube.com/watch?v=JyF0oyarz4U&list=PLokhY9fbx05eeUZCNUbelL-b0TyVizPjt'><em>The AI of Half-Life: finite-state machines</em></a>.</li>
          <li><em><a href='https://gameprogrammingpatterns.com/contents.html'>Game Programming Patterns</a> (<a href='https://gameprogrammingpatterns.com/state.html'>state pattern</a>)</em>.</li>


        </ul>
      </li>

    </ol>


    <h2>Actividades</h2>
<!--
    <p><strong>1.</strong> Lee <a href='src/fsm_definition.pdf'>este</a>, <a href='https://aev.org.es/unity-desarrollo-de-una-sencilla-maquina-de-estados/'>este</a> y <a href='https://gamedevelopment.tutsplus.com/es/tutorials/finite-state-machines-theory-and-implementation--gamedev-11867'>este</a> artículo y explica máquinas de estado (FSM) para videojuegos con tus propias palabras.</p>

    <p><strong>2.</strong> Diseña por ti mismo la IA de un enemigo con FSM usando <a href='https://www.cs.unc.edu/~otternes/comp455/fsm_designer/'>esto</a>; luego, examina la <a href='https://docs.unity3d.com/Manual/AnimationSection.html'>animación</a> en Unity.</p>
-->
    <p><strong>1.</strong> Lee <a href='src/fsm_definition.pdf'>este</a>, <a href='https://aev.org.es/unity-desarrollo-de-una-sencilla-maquina-de-estados/'>este</a> y <a href='https://gamedevelopment.tutsplus.com/es/tutorials/finite-state-machines-theory-and-implementation--gamedev-11867'>este</a> artículo, explica <a href='https://en.wikipedia.org/wiki/Finite-state_machine'>FSM</a> para videojuegos con tus palabras y <a href='https://www.cs.unc.edu/~otternes/comp455/fsm_designer/'>diseña</a> el tuyo propio.</p>



    <p><strong>2.</strong> Haz este <a href='https://www.youtube.com/watch?v=e-B1NM2-Ols&list=PLahPjHG4MZqFve1FFqhL-ioyMJXI4g0_C'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/AnimationSection.html'>Animation</a> en Unity, <a href='https://docs.unity3d.com/Manual/class-Animator.html'>Animator Component</a> y <a href='https://docs.unity3d.com/Manual/AnimatorControllers.html'>Animator Controller</a>.</p>

    <p><strong>3.</strong> Haz este <a href='https://www.youtube.com/watch?v=Dd2CjZrRAjA&list=PLahPjHG4MZqFve1FFqhL-ioyMJXI4g0_C'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/AnimationStateMachines.html'>Animation State Machines</a> (<a href='https://docs.unity3d.com/Manual/class-State.html'><em>state</em></a>, <a href='https://docs.unity3d.com/Manual/class-Transition.html'><em>transition</em></a>), sus <a href='https://docs.unity3d.com/Manual/StateMachineBasics.html'>conceptos</a> y <a href='https://docs.unity3d.com/Manual/AnimationParameters.html'>parámetros</a>.</p>

    <p><strong>4.</strong> Haz este <a href='https://www.youtube.com/watch?v=-m7ZaHhkDAc&list=PLNEAWvYbJJ9kZpaIg2RfzAc_KZixBgchT'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/class-Tilemap.html'>Tilemap</a>, <a href='https://docs.unity3d.com/Manual/class-Grid.html'>Grid</a>, el <a href='https://docs.unity3d.com/Manual/Tilemap-workflow.html'><em>workflow</em></a> a seguir y repasa <a href='https://docs.unity3d.com/Manual/Sprites.html'>Sprites</a> y <a href='https://docs.unity3d.com/Manual/CollidersOverview.html'>Collider</a>.</p>

    <p><strong>5.</strong> Haz este <a href='https://www.youtube.com/watch?v=5o9b_VdjfDU&list=PLNEAWvYbJJ9kZpaIg2RfzAc_KZixBgchT&index=2'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/class-PhysicsMaterial2D.html'>PhysicsMaterial2D</a>, <a href='https://docs.unity3d.com/Manual/class-CompositeCollider2D.html'>CompositeCollider2D</a> y haz, opcionalmente, este <a href='https://www.youtube.com/watch?v=vlXF6XhAje8&list=PLNEAWvYbJJ9kZpaIg2RfzAc_KZixBgchT'>tutorial</a>.</p>

    <p><strong>6.</strong> Haz este <a href='https://www.youtube.com/watch?v=Z25BIdJbDZU&list=PLNEAWvYbJJ9kZpaIg2RfzAc_KZixBgchT'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/AnimationClips.html'>Animation Clips</a> y <a href='https://docs.unity3d.com/Manual/AnimationEditorGuide.html'>Animation Window</a>.</p>

    <p><strong>7.</strong> Añade <a href='src/nivel.png'>aquí</a> una IA (<a href='https://assetstore.unity.com/packages/2d/characters/pixel-adventure-2-155418'><em>bat</em></a>) con <a href='https://en.wikipedia.org/wiki/Finite-state_machine'>FSM</a> usando <a href='https://docs.unity3d.com/Manual/AnimatorControllers.html'>Animator Controller</a> y <a href='https://docs.unity3d.com/ScriptReference/StateMachineBehaviour.html'>StateMachineBehaviour</a> con este <a href='https://www.youtube.com/watch?v=2cDXDUotpYI'>tutorial</a>.</p>

    <p><strong>8.</strong> Crea un juego con tres IA (<a href='src/ai_exercise_level.jpg'>ejemplo</a>) con esta <a href='src/ai_exercise_fsm.png'>FSM</a> usando una implementación básica (<em>switch-enum</em>).</p>

    <p><strong>9 (opcional).</strong> Haz <a href='https://learn.unity.com/tutorial/finite-state-machines-1?courseId=5dd851beedbc2a1bf7b72bed&projectId=5e0b85cdedbc2a144cf5cde5'>este</a>, <a href='https://learn.unity.com/tutorial/creating-and-using-a-state-class?courseId=5dd851beedbc2a1bf7b72bed&projectId=5e0b85cdedbc2a144cf5cde5'>este</a>, <a href='https://learn.unity.com/tutorial/patrolling-the-perimeter?courseId=5dd851beedbc2a1bf7b72bed&projectId=5e0b85cdedbc2a144cf5cde5'>este</a>, <a href='https://learn.unity.com/tutorial/chasing-the-player?courseId=5dd851beedbc2a1bf7b72bed&projectId=5e0b85cdedbc2a144cf5cde5'>este</a> y <a href='https://learn.unity.com/tutorial/finite-state-machine-challenge?courseId=5dd851beedbc2a1bf7b72bed&projectId=5e0b85cdedbc2a144cf5cde5'>este</a> tutorial en Unity y estudia <a href='https://en.wikipedia.org/wiki/Finite-state_machine'>FSM</a> (máquinas de estado finito).</p>

    <p><strong>10 (opcional).</strong> Haz este <a href='https://www.youtube.com/watch?v=Sbemf7D_Slo&list=PLahPjHG4MZqFve1FFqhL-ioyMJXI4g0_C'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/class-BlendTree.html'>Blend Trees</a>; luego, haz este <a href='https://www.youtube.com/watch?v=DuVG-oR9tis&list=PLahPjHG4MZqFve1FFqhL-ioyMJXI4g0_C'>tutorial</a> y estudia <a href='https://docs.unity3d.com/Manual/AnimationLayers.html'>Animation Layers</a>.</p>

    <p><strong>11 (opcional).</strong> Haz <a href='https://www.youtube.com/watch?v=PaT_43fmT_k'>este</a>, <a href='https://www.youtube.com/watch?v=m8GfeZ2zKEA'>este</a> y <a href='https://www.youtube.com/watch?v=ccazxVF_nrM'>este</a> tutorial y profundiza con las FSM usando <a href='https://docs.unity3d.com/Manual/AnimatorControllers.html'>Animator Controller</a> de Unity.</p>

    <p><strong>12 (opcional).</strong> Crea un <a href='https://en.wikipedia.org/wiki/First-person_shooter'>FPS</a> con <a href='https://en.wikipedia.org/wiki/Finite-state_machine'>FSM</a> con <a href='https://www.youtube.com/watch?v=ira8_skeRUs'>este</a>, <a href='https://www.youtube.com/watch?v=CmzJtM5BIKE'>este</a>, <a href='https://www.youtube.com/watch?v=PK3gDP70pTo'>este</a>, <a href='https://www.youtube.com/watch?v=cp8Ar5wRC0M'>este</a>, <a href='https://www.youtube.com/watch?v=yv4yPCORQsE'>este</a>, <a href='https://www.youtube.com/watch?v=L7BVZQtcdJM'>este</a>, <a href='https://www.youtube.com/watch?v=iT49pNcu1jk'>este</a>, <a href='https://www.youtube.com/watch?v=l6_sLBW0i_U'>este</a>, <a href='https://www.youtube.com/watch?v=g3q-fvymFEU'>este</a> y <a href='https://www.youtube.com/watch?v=ikxcj55BBuE'>este</a> tutorial.</p>


    <h2>Evaluación</h2>

    <h3>Entrega</h3>

    <p>Sube un ZIP con los juegos en Windows, en GNU/Linux y un PDF con enlaces para jugar <em>online</em> en <a href='https://itch.io/'><em>itch.io</em></a>.</p>

    <p>Para exportar los juegos tanto en Windows como en GNU/Linux:</p>

    <ol>
      <li><a href='https://docs.unity3d.com/Manual/BuildSettingsStandalone.html'>Exporta</a> cada juego con <em>File&rarr;Build settings&rarr;Windows,Mac,Linux&rarr;(Switch platform)&rarr;Build and run</em>.</li>
    </ol>

    <p>Para subir los juegos a <a href='https://itch.io/'><em>itch.io</em></a> y obtener los enlaces para jugar <em>online</em>:</p>

    <ol>
      <li><a href='https://docs.unity3d.com/Manual/webgl-building.html'>Exporta</a> cada juego a WebGL en Unity: <em>File&rarr;Build settings&rarr;WebGL&rarr;(Switch platform)&rarr;Build and run</em>.</li>
      <li>Una vez exportado, comprímelo en un solo <em>zip</em> (<em>index.html</em> así como el resto de archivos y carpetas).</li>
      <li>Sube cada juego a <a href='https://itch.io'><em>itch.io</em></a> como <!-- como tipo --><a href='https://milq.github.io/cursos/pria/ud/2/itch.io/html_project.png'>HTML</a> a <a href='https://milq.github.io/cursos/pria/ud/2/itch.io/720p_viewport.png'><em>720p</em></a> en <a href='https://milq.github.io/cursos/pria/ud/2/itch.io/draft_mode.png'><em>Draft mode</em></a>, obtén su <a href='https://milq.github.io/cursos/pria/ud/2/itch.io/secret_url.png'><em>Secret URL</em></a> e indícalo en el PDF.</li> <!-- e indícalo -->
    </ol>

    <h3>Criterios de calificación</h3>

    <ul>
      <li>Actividad 2-7: <strong>hasta 7 puntos</strong>.</li>
      <li>Actividad 8: <strong>hasta 3 puntos</strong>.</li>
    </ul>

    <h3>Criterios de evaluación asociados</h3>

    <ul>
      <li>En esta actividad se asocia todos los criterios de evaluación del resultado de aprendizaje 5 (<span title='RA5 - Identifica y relaciona elementos propios de la inteligencia artificial y el aprendizaje automático en el desarrollo de videojuegos.'>RA5</span>).</li>
    </ul>

    <footer><a href='https://milq.github.io/cursos/pria'>Programación en Red e IA</a> | Unidad creada por <a href='https://milq.github.io'>Manuel Ignacio López Quintero</a> bajo esta <a href='https://creativecommons.org/licenses/by-sa/4.0/'>licencia</a>.</footer>

  </body>
</html>
